<div class="row block-white justify-content-center">
  <div class="col-12 text-center">
    <% if no_search_results?(@applicants) %>
      <h4>Aucun allocataire ne correspond à votre recherche</h4>
    <% else %>
      <table class="table table-hover table-responsive">
        <thead class="text-dark-blue">
          <th scope="col">Nom</th>
          <th scope="col">Prénom</th>
          <th scope="col" class="d-none d-lg-table-cell">Email</th>
          <th scope="col" class="d-none d-lg-table-cell">Téléphone</th>
          <% if show_sms_invitation?(@configuration) %>
            <th scope="col">Dernière invitation SMS</th>
          <% end %>
          <% if show_email_invitation?(@configuration) %>
            <th scope="col">Dernière invitation email</th>
          <% end %>
          <% if show_postal_invitation?(@configuration) %>
            <th scope="col">Dernière invitation courrier</th>
          <% end %>
          <% if show_notification?(@configuration)%>
            <th scope="col">Dernière Notification envoyée le</th>
          <% end %>
          <th scope="col">Statut</th>
          <th scope="col"></th>
        </thead>
        <tbody class="align-middle">
          <% @applicants.each do |applicant| %>
            <tr class="<%= "table-danger" if applicant.is_archived? %>">
              <td><%= display_attribute applicant.last_name %></td>
              <td><%= display_attribute applicant.first_name %></td>
              <td class="d-none d-lg-table-cell"><%= display_attribute applicant.email %></td>
              <td class="d-none d-lg-table-cell"><%= display_attribute applicant.phone_number %></td>
              <% if show_sms_invitation?(@configuration) %>
                <td><%= display_attribute format_date(applicant.last_sms_invitation_sent_at) %></td>
              <% end %>
              <% if show_email_invitation?(@configuration) %>
                <td><%= display_attribute format_date(applicant.last_email_invitation_sent_at) %></td>
              <% end %>
              <% if show_postal_invitation?(@configuration) %>
                <td><%= display_attribute format_date(applicant.last_postal_invitation_sent_at) %></td>
              <% end %>
              <% if show_notification?(@configuration) %>
                <td><%= display_attribute format_date(applicant.last_notification_sent_at) %></td>
              <% end %>
              <% if applicant.is_archived? %>
                <td>Dossier archivé</td>
              <% else %>
                <td class="<%= background_class_for_status(applicant) %>">
                  <%= I18n.t("activerecord.attributes.applicant.statuses.#{applicant.status}") %>
                  <%= display_status_notice(applicant) %>
                </td>
              <% end %>
              <td class="padding-left-15">
                <% unless applicant.deleted? %>
                  <%# We consider that an applicant is only in one organisation per department %>
                  <%= link_to compute_applicant_path(applicant, @organisation, @department) do %>
                    <button class="btn btn-blue">Gérer</button>
                  <% end %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
    <div class="row justify-content-center">
      <div class="col-3 justify-content-center nav-pagination">
        <%= paginate @applicants, outer_window: 1, window: 1 %>
      </div>
    </div>
  </div>
</div>
