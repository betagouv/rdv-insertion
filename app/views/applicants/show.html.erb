<div class="container label-blue mt-4">
  <div class="d-flex justify-content-between mb-4">
    <div>
      <%= link_to(compute_index_path(@organisation, @department)) do %>
        <button class="btn btn-blue-out">Retour</button>
      <% end %>
      <%= link_to rdv_solidarites_user_url(@organisation, @applicant), target: "_blank" do %>
        <button class="btn btn-blue">Voir sur RDV-Solidarités<i class="fas fa-external-link-alt icon-sm"></i></button>
      <% end %>
    </div>
    <div>
      <% unless @applicant.rdv_seen? %>
        <button class="btn btn-primary" id="update-status-button" data-applicant-id="<%= @applicant.id %>" data-organisation-id="<%= @organisation.id %>">
          <%= @applicant.resolved? ? "Rouvrir le dossier" : "Clôturer le dossier" %>
        </button>
      <% end %>
      <%= link_to compute_edit_path(@applicant, @organisation, @department) do %>
        <button class="btn btn-blue">Modifier</button>
      <% end %>
    </div>
  </div>
  <div class="mb-4">
    <div class="row d-flex justify-content-around flex-wrap">
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Nom</h4>
        <p><%= display_attribute @applicant.last_name %></p>
      </div>
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Prénom</h4>
        <p><%= display_attribute @applicant.first_name %></p>
      </div>
    </div>
    <div class="row d-flex justify-content-around flex-wrap">
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Civilité</h4>
        <p><%= display_attribute @applicant.title %></p>
      </div>
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Date d'entrée flux</h4>
        <p><%= display_attribute format_date(@applicant.rights_opening_date) %></p>
      </div>
    </div>
    <div class="row d-flex justify-content-around flex-wrap">
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Numéro allocataire</h4>
        <p><%= display_attribute @applicant.affiliation_number %></p>
      </div>
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Email</h4>
        <p><%= display_attribute @applicant.email %></p>
      </div>
    </div>
    <div class="row d-flex justify-content-around flex-wrap">
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Date de naissance</h4>
        <p><%= display_attribute format_date(@applicant.birth_date) %></p>
      </div>
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Rôle</h4>
        <p><%= display_attribute @applicant.role %></p>
      </div>
    </div>
    <div class="row d-flex justify-content-around flex-wrap">
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Adresse</h4>
        <p><%= display_attribute @applicant.address %></p>
      </div>
      <div class="col-10 col-md-5">
        <h4 class="label-blue">Téléphone</h4>
        <p><%= display_attribute @applicant.phone_number %></p>
      </div>
    </div>
  </div>
  <%= react_component(
    "components/ApplicantTracker", {
      applicant: @applicant,
      organisation: @organisation,
      department: @department,
      isDepartmentLevel: department_level?,
      showSmsInvitation: show_sms_invitation?(@configuration),
      showEmailInvitation: show_email_invitation?(@configuration),
      rdvs: @applicant.rdvs,
      numberOfCancelledRdvs: @applicant.rdvs.cancelled_by_user.count,
      statusNotice: display_status_notice(@applicant),
      outOfTime: @applicant.invited_before_time_window?,
      actionRequired: @applicant.action_required?,
      humanStatus: I18n.t("activerecord.attributes.applicant.statuses.#{@applicant.status}")
    }
  ) %>
</div>

